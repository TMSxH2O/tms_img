<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="748px" preserveAspectRatio="none" style="width:736px;height:748px;" version="1.1" viewBox="0 0 736 748" width="736px" zoomAndPan="magnify"><defs><filter height="300%" id="f3vs0zicyiw4a" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="36" x2="36" y1="70.1201" y2="677.4536"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="177" x2="177" y1="70.1201" y2="677.4536"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="344" x2="344" y1="70.1201" y2="677.4536"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="485" x2="485" y1="70.1201" y2="677.4536"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="583" x2="583" y1="70.1201" y2="677.4536"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="711" x2="711" y1="70.1201" y2="677.4536"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="5" y="67.0439">病例接口</text><path d="M15.5,23 L15.5,47 M15.5,35 L32.5,35 " fill="none" filter="url(#f3vs0zicyiw4a)" style="stroke:#A80036;stroke-width:2.0;"/><ellipse cx="44.5" cy="35" fill="#FEFECE" filter="url(#f3vs0zicyiw4a)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="5" y="692.4976">病例接口</text><path d="M15.5,699.5737 L15.5,723.5737 M15.5,711.5737 L32.5,711.5737 " fill="none" filter="url(#f3vs0zicyiw4a)" style="stroke:#A80036;stroke-width:2.0;"/><ellipse cx="44.5" cy="711.5737" fill="#FEFECE" filter="url(#f3vs0zicyiw4a)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="139" y="67.0439">病例控制类</text><ellipse cx="177" cy="35" fill="#FEFECE" filter="url(#f3vs0zicyiw4a)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="173,23,179,18,177,23,179,28,173,23" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="139" y="692.4976">病例控制类</text><ellipse cx="177" cy="711.5737" fill="#FEFECE" filter="url(#f3vs0zicyiw4a)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="173,699.5737,179,694.5737,177,699.5737,179,704.5737,173,699.5737" style="stroke:#A80036;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#f3vs0zicyiw4a)" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="84" x="300" y="32"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="307" y="55.0439">病例服务类</text><rect fill="#FEFECE" filter="url(#f3vs0zicyiw4a)" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="84" x="300" y="676.4536"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="307" y="699.4976">病例服务类</text><rect fill="#FEFECE" filter="url(#f3vs0zicyiw4a)" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="84" x="441" y="32"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="448" y="55.0439">病例工具类</text><rect fill="#FEFECE" filter="url(#f3vs0zicyiw4a)" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="84" x="441" y="676.4536"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="448" y="699.4976">病例工具类</text><rect fill="#FEFECE" filter="url(#f3vs0zicyiw4a)" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="84" x="539" y="32"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="546" y="55.0439">病例数据类</text><rect fill="#FEFECE" filter="url(#f3vs0zicyiw4a)" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="84" x="539" y="676.4536"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="546" y="699.4976">病例数据类</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="687" y="67.0439">数据库</text><path d="M693,15 C693,5 711,5 711,5 C711,5 729,5 729,15 L729,41 C729,51 711,51 711,51 C711,51 693,51 693,41 L693,15 " fill="#FEFECE" filter="url(#f3vs0zicyiw4a)" style="stroke:#000000;stroke-width:1.5;"/><path d="M693,15 C693,25 711,25 711,25 C711,25 729,25 729,15 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="687" y="692.4976">数据库</text><path d="M693,705.5737 C693,695.5737 711,695.5737 711,695.5737 C711,695.5737 729,695.5737 729,705.5737 L729,731.5737 C729,741.5737 711,741.5737 711,741.5737 C711,741.5737 693,741.5737 693,731.5737 L693,705.5737 " fill="#FEFECE" filter="url(#f3vs0zicyiw4a)" style="stroke:#000000;stroke-width:1.5;"/><path d="M693,705.5737 C693,715.5737 711,715.5737 711,715.5737 C711,715.5737 729,715.5737 729,705.5737 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><polygon fill="#A80036" points="165,99.8745,175,103.8745,165,107.8745,169,103.8745" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="36" x2="171" y1="103.8745" y2="103.8745"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="43" y="99.0181">传入填充的数据</text><polygon fill="#A80036" points="332,149.3833,342,153.3833,332,157.3833,336,153.3833" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="177" x2="338" y1="153.3833" y2="153.3833"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="184" y="130.7725">调用生成病例文件的方法</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="184" y="148.5269">传入填充的数据</text><line style="stroke:#A80036;stroke-width:1.0;" x1="344" x2="386" y1="185.1377" y2="185.1377"/><line style="stroke:#A80036;stroke-width:1.0;" x1="386" x2="386" y1="185.1377" y2="198.1377"/><line style="stroke:#A80036;stroke-width:1.0;" x1="345" x2="386" y1="198.1377" y2="198.1377"/><polygon fill="#A80036" points="355,194.1377,345,198.1377,355,202.1377,351,198.1377" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="351" y="180.2813">校验参数是否完整</text><polygon fill="#A80036" points="571,243.6465,581,247.6465,571,251.6465,575,247.6465" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="344" x2="577" y1="247.6465" y2="247.6465"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="351" y="225.0356">更新订单状态，将其订单状态</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="351" y="242.79">已支付推进到已处理</text><polygon fill="#A80036" points="699,275.4009,709,279.4009,699,283.4009,703,279.4009" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="583" x2="705" y1="279.4009" y2="279.4009"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="590" y="274.5444">数据更新到数据库</text><polygon fill="#A80036" points="594,287.4009,584,291.4009,594,295.4009,590,291.4009" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="588" x2="710" y1="291.4009" y2="291.4009"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="600" y="307.2988">返回数据更新结果</text><polygon fill="#A80036" points="355,319.1553,345,323.1553,355,327.1553,351,323.1553" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="349" x2="582" y1="323.1553" y2="323.1553"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="361" y="339.0532">订单状态变动结果</text><polygon fill="#A80036" points="473,388.4185,483,392.4185,473,396.4185,477,392.4185" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="344" x2="479" y1="392.4185" y2="392.4185"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="351" y="369.8076">调用生成模板方法，</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="351" y="387.562">拼接生成htm文件</text><polygon fill="#A80036" points="355,400.4185,345,404.4185,355,408.4185,351,404.4185" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="349" x2="484" y1="404.4185" y2="404.4185"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="361" y="420.3164">返回生成的字符串</text><line style="stroke:#A80036;stroke-width:1.0;" x1="344" x2="386" y1="455.9272" y2="455.9272"/><line style="stroke:#A80036;stroke-width:1.0;" x1="386" x2="386" y1="455.9272" y2="468.9272"/><line style="stroke:#A80036;stroke-width:1.0;" x1="345" x2="386" y1="468.9272" y2="468.9272"/><polygon fill="#A80036" points="355,464.9272,345,468.9272,355,472.9272,351,468.9272" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="351" y="451.0708">输出到文件</text><polygon fill="#A80036" points="571,496.6816,581,500.6816,571,504.6816,575,500.6816" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="344" x2="577" y1="500.6816" y2="500.6816"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="351" y="495.8252">插入新的病例数据</text><polygon fill="#A80036" points="699,528.436,709,532.436,699,536.436,703,532.436" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="583" x2="705" y1="532.436" y2="532.436"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="590" y="527.5796">数据插入数据库</text><polygon fill="#A80036" points="594,540.436,584,544.436,594,548.436,590,544.436" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="588" x2="710" y1="544.436" y2="544.436"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="600" y="560.334">返回插入的结果</text><polygon fill="#A80036" points="355,572.1904,345,576.1904,355,580.1904,351,576.1904" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="349" x2="582" y1="576.1904" y2="576.1904"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="361" y="592.0884">插入是否成功</text><polygon fill="#A80036" points="188,603.9448,178,607.9448,188,611.9448,184,607.9448" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="182" x2="343" y1="607.9448" y2="607.9448"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="194" y="623.8428">返回生成病例的结果</text><polygon fill="#A80036" points="47,635.6992,37,639.6992,47,643.6992,43,639.6992" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="41" x2="176" y1="639.6992" y2="639.6992"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="53" y="655.5972">返回标准结构的结果</text><!--MD5=[0b51bf1414969f63c4d4aae317f23740]
@startuml generate-medical-sequence
skinparam responseMessageBelowArrow true
boundary 病例接口 as b
control  病例控制类 as control
participant 病例服务类 as service
participant 病例工具类 as helper
participant 病例数据类 as mapper
database 数据库 as bd

b -> control : 传入填充的数据
control -> service : 调用生成病例文件的方法\n传入填充的数据
service -> service : 校验参数是否完整
service -> mapper : 更新订单状态，将其订单状态\n已支付推进到已处理
mapper -> bd : 数据更新到数据库
bd -> mapper : 返回数据更新结果
mapper -> service : 订单状态变动结果
service -> helper : 调用生成模板方法，\n拼接生成htm文件
helper -> service : 返回生成的字符串
service -> service : 输出到文件
service -> mapper : 插入新的病例数据
mapper -> bd : 数据插入数据库
bd -> mapper : 返回插入的结果
mapper -> service : 插入是否成功
service -> control : 返回生成病例的结果
control -> b : 返回标准结构的结果
@enduml

PlantUML version 1.2021.00(Sun Jan 10 18:25:05 GMT+08:00 2021)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>