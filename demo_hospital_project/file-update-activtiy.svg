<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="435px" preserveAspectRatio="none" style="width:702px;height:435px;" version="1.1" viewBox="0 0 702 435" width="702px" zoomAndPan="magnify"><defs><filter height="300%" id="f1ku4qmhwz0btc" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="237.25" cy="20" fill="#000000" filter="url(#f1ku4qmhwz0btc)" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#f1ku4qmhwz0btc)" height="36.3887" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="68" x="203.25" y="50"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="48" x="213.25" y="73.752">上传文件</text><rect fill="#FEFECE" filter="url(#f1ku4qmhwz0btc)" height="36.3887" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="122" x="176.25" y="106.3887"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="102" x="186.25" y="130.1406">获取文件的sha256</text><polygon fill="#FEFECE" filter="url(#f1ku4qmhwz0btc)" points="166.75,162.7773,307.75,162.7773,319.75,174.7773,307.75,186.7773,166.75,186.7773,154.75,174.7773,166.75,162.7773" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="141" x="166.75" y="179.8718">文件已经存在对应的sha256?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="19" x="135.75" y="172.3604">true</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="24" x="319.75" y="172.3604">false</text><rect fill="#FFFF00" filter="url(#f1ku4qmhwz0btc)" height="36.3887" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="154" x="11" y="196.7773"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="134" x="21" y="220.5293">返回现有的文件对应的url</text><ellipse cx="88" cy="263.166" fill="#FFFFFF" filter="url(#f1ku4qmhwz0btc)" rx="10" ry="10" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:2.5;" x1="81.8128" x2="94.1872" y1="256.9788" y2="269.3532"/><line style="stroke:#000000;stroke-width:2.5;" x1="94.1872" x2="81.8128" y1="256.9788" y2="269.3532"/><rect fill="#FEFECE" filter="url(#f1ku4qmhwz0btc)" height="36.3887" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="92" x="340.5" y="196.7773"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="72" x="350.5" y="220.5293">保存文件数据</text><polygon fill="#FEFECE" filter="url(#f1ku4qmhwz0btc)" points="350.5,253.166,422.5,253.166,434.5,265.166,422.5,277.166,350.5,277.166,338.5,265.166,350.5,253.166" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="72" x="350.5" y="270.2605">保存文件成功?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="19" x="319.5" y="262.749">true</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="24" x="434.5" y="262.749">false</text><rect fill="#008000" filter="url(#f1ku4qmhwz0btc)" height="36.3887" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="118" x="195" y="287.166"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="98" x="205" y="310.918">返回文件对应的url</text><ellipse cx="254" cy="368.5547" fill="#FFFFFF" filter="url(#f1ku4qmhwz0btc)" rx="10" ry="10" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:2.5;" x1="247.8128" x2="260.1872" y1="362.3675" y2="374.7419"/><line style="stroke:#000000;stroke-width:2.5;" x1="260.1872" x2="247.8128" y1="362.3675" y2="374.7419"/><rect fill="#000000" filter="url(#f1ku4qmhwz0btc)" height="6" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="352" x="333" y="287.166"/><rect fill="#FF0000" filter="url(#f1ku4qmhwz0btc)" height="36.3887" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="128" x="347" y="313.166"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="108" x="357" y="336.918">返回保存失败的提示</text><rect fill="#FEFECE" filter="url(#f1ku4qmhwz0btc)" height="36.3887" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="188" x="485" y="313.166"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="168" x="495" y="336.918">通过使用异步方法清理文件数据</text><rect fill="#000000" filter="url(#f1ku4qmhwz0btc)" height="6" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="352" x="333" y="369.5547"/><ellipse cx="501" cy="408.5547" fill="#FFFFFF" filter="url(#f1ku4qmhwz0btc)" rx="10" ry="10" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:2.5;" x1="494.8128" x2="507.1872" y1="402.3675" y2="414.7419"/><line style="stroke:#000000;stroke-width:2.5;" x1="507.1872" x2="494.8128" y1="402.3675" y2="414.7419"/><line style="stroke:#A80036;stroke-width:1.5;" x1="237.25" x2="237.25" y1="30" y2="50"/><polygon fill="#A80036" points="233.25,40,237.25,50,241.25,40,237.25,44" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="237.25" x2="237.25" y1="86.3887" y2="106.3887"/><polygon fill="#A80036" points="233.25,96.3887,237.25,106.3887,241.25,96.3887,237.25,100.3887" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="88" x2="88" y1="233.166" y2="253.166"/><polygon fill="#A80036" points="84,243.166,88,253.166,92,243.166,88,247.166" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="254" x2="254" y1="323.5547" y2="358.5547"/><polygon fill="#A80036" points="250,348.5547,254,358.5547,258,348.5547,254,352.5547" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="411" x2="411" y1="293.166" y2="313.166"/><polygon fill="#A80036" points="407,303.166,411,313.166,415,303.166,411,307.166" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="579" x2="579" y1="293.166" y2="313.166"/><polygon fill="#A80036" points="575,303.166,579,313.166,583,303.166,579,307.166" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="411" x2="411" y1="349.5547" y2="369.5547"/><polygon fill="#A80036" points="407,359.5547,411,369.5547,415,359.5547,411,363.5547" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="579" x2="579" y1="349.5547" y2="369.5547"/><polygon fill="#A80036" points="575,359.5547,579,369.5547,583,359.5547,579,363.5547" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="501" x2="501" y1="375.5547" y2="398.5547"/><polygon fill="#A80036" points="497,388.5547,501,398.5547,505,388.5547,501,392.5547" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="338.5" x2="254" y1="265.166" y2="265.166"/><line style="stroke:#A80036;stroke-width:1.5;" x1="254" x2="254" y1="265.166" y2="287.166"/><polygon fill="#A80036" points="250,277.166,254,287.166,258,277.166,254,281.166" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="434.5" x2="501" y1="265.166" y2="265.166"/><line style="stroke:#A80036;stroke-width:1.5;" x1="501" x2="501" y1="265.166" y2="287.166"/><polygon fill="#A80036" points="497,277.166,501,287.166,505,277.166,501,281.166" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="386.5" x2="386.5" y1="233.166" y2="253.166"/><polygon fill="#A80036" points="382.5,243.166,386.5,253.166,390.5,243.166,386.5,247.166" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="154.75" x2="88" y1="174.7773" y2="174.7773"/><line style="stroke:#A80036;stroke-width:1.5;" x1="88" x2="88" y1="174.7773" y2="196.7773"/><polygon fill="#A80036" points="84,186.7773,88,196.7773,92,186.7773,88,190.7773" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="319.75" x2="386.5" y1="174.7773" y2="174.7773"/><line style="stroke:#A80036;stroke-width:1.5;" x1="386.5" x2="386.5" y1="174.7773" y2="196.7773"/><polygon fill="#A80036" points="382.5,186.7773,386.5,196.7773,390.5,186.7773,386.5,190.7773" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="237.25" x2="237.25" y1="142.7773" y2="162.7773"/><polygon fill="#A80036" points="233.25,152.7773,237.25,162.7773,241.25,152.7773,237.25,156.7773" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[2a46b92a35be2940a61902d28418741e]
@startuml file-update-activtiy
start
:上传文件;
:获取文件的sha256;
if (文件已经存在对应的sha256?) then (true)
    #Yellow:返回现有的文件对应的url;
    end
else (false)
    :保存文件数据;
    if (保存文件成功?) then (true)
        #Green:返回文件对应的url;
        end
    else (false)
        fork
        #Red:返回保存失败的提示;
        fork again
        :通过使用异步方法清理文件数据;
        end fork
        end
@enduml

PlantUML version 1.2021.00(Sun Jan 10 18:25:05 GMT+08:00 2021)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>